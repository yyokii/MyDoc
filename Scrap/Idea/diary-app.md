## Diary App

* 解決したい課題は？
  * 日記を、簡単に、書きたくなるように、なりたい
* 課題の解決方法（コアバリュー）は？
  * 気持ちいい日記アプリ
* 同じようなサービスは既にありますか？
  * iOS
    * シンプル日記
      * 最初にリマインダーを設定させてるのいい
  * macアプリだと
    * https://www.producthunt.com/products/mini-diary#mini-diary
* マネタイズはどうしますか？
  * パスワードロック
  * 広告
  * 広告削除
  * 下書き保存
* どんなツール/技術をどんな目的で利用しますか？（初めて利用するものには✅をつける）
  * ✅ iCoud sync
  * ✅ Core Data（初めてではないが前に触ってからしばらく経っている）
  * SwiftUI
* スケジュール遵守の重要度は？（1~10段階評価）
  * 10
* コストの重要度は？（1~10段階評価）
  * 5
* 品質の重要度は？（1~10段階評価）
  * 4
* ゴールとその最遅スケジュールは？
  * 5月末までにリリースしている
    * 7月中旬にリリースした
      * 一旦リリースした感じ
      * 時間かかりすぎたなあ
* 大まかな流れは？
  * 機能一覧書き出し
    * ✅ 日記を保存
      * ✅ 画像も保存できるようにする
        * 500ptのサイズにリサイズして、jpegで0.5の圧縮率でだいたい100kbぐらい。365日で35MB。まあ悪くはない？
    * ✅ 日記を削除
    * ✅ 日記を編集
    * ✅ iCloudに同期されている
      * 同期してない時のエラーハンドリング
    * ✅ お気に入り一覧取得
    * ✅ 統計情報を作成
      * 可視化による続いてるモチベ
        * ✅ 現在のストリーク
        * 最長ストリーク
          * 毎回計算するのあれなのでどこかに保存したいかも。そしてそれはiCloudでsyncしたいかも。
          * UserDefaultsのsyncも可能なのでそれでいいかもしれないが、あまり時間使いたくないので一旦保留
        * ✅ 投稿数
    * ✅ 今日の天気の取得
    * ✅ ローカル通知設定
    * パスコードロック
      * コア機能ではないので後回し
  * メイン機能開発
    * 上記のチェックマークで進捗を可視化
  * デザイン作成
    * 4月末ぐらいに初期案がfigmaでできており、それをベースに作成
    * 途中で細かいところの変更あり
    * statisticsはui悩んだ
      * 結局あまり納得いかず、且つ初期リリース時にデータそんなにないdろうから多分つくらない。settigsの一部にいれるかも
  * エラーフィードバック実装
    * 5月初旬〜対応
  * デザイン当て込み
    * 5月初旬〜対応
  * 改善/開発
  * リリース
  * （グロース）

---

memo

* 日記アプリ、シンプル日記は出尽くしていて検索で出て来ないからマーケ大変だね、使われたいなら検索での出てきやすさ見てから作るか考えるのはアリだね

* 結局dark modeのデザインもすきなので、画像は消してdark mode 対応した

  * 画像気にするの面倒だしまあこれでいいだろう

* 調査メモ

  * ```
    DiaryDetailViewの toolbarからShareView（or その簡易実装であるDemo画面）へNavigationLinkで遷移しようとするとメモリをひたすら消費する。
     NavigationLinkのクロージャー内がずっと呼ばれる。→ それより前の処理も追いたいかも
    
     Homeから遷移してみると問題なし。
     となると遷移先の画面ではなく、遷移元かそれ以前のViewが原因である。
     Home, List, Item, Detail, Share
     この順に検証していけば問題がありそうな画面はわかるかも？これは「それより前の処理も追いたいかも」の調査にもなる
    
     ✅ Home, ✅ List, ❌ Detail
    
     @mainをDiaryDetailViewでitem=nilだと正常
     itemありでも同じ
    
     てことは画面のStack状況に依存している
     Listからitem=nilとしても問題は発生している。つまりDiaryDataStoreの問題ではない。
     
     わからん。ShareViewのcolomunsを
      lazy var columns にすれば一旦、事象は発生しなくはなる。
    ```

* 記事のネタ

  * contentShapeでhittestの領域を変更できる https://developer.apple.com/forums/thread/123717 

  * テキストインプット画面、キーボードを回避した透過画面作成

  * グラデーションview

  * coredataのプレビュー

  * asyncstate

  * 下部に限らずDatePickerを表示している状態または閉じてすぐに他のsheetを表示させるとPresentaionエラーとなり、

    ​       以降Viewが再生成？されるまでSheetは表示されない。（iOS 16.4.1(a)実機で検証）

* エッセンスという言葉をアプリ名にしようとした。モモより、時間の源は人間の豊かさの源泉と捉えるとそれは時間の源を拡充させたいと思う自分の思いが反映されたからだと思った。

* sticky header、自作しようと思ったが、offset固定が効かないケースがあった。ライブラリを利用することにした。

  * ライブラリでバグ？で挙動きになるところがあったのではずした。
  * pinnedViewsを利用すれば楽にできることを知ったのでそれで対応した。
    * https://techlife.cookpad.com/entry/2023/02/28/163645

* 画像をダークモードでいい感じにだしたいから、filterかけたい。でもいい感じのfilterはなくて自分で作るのがはやそう。他の方法でダークモードでいい感じにできないか考える・・・これで余裕で2hとか悩むのがもったいない
  * ということでlightモードだけにした
  * 一部デザイン妥協してやっぱりdarkモードにも対応させたが、イラストを使うとなった時にどうdarkに対応させるかが面倒。結構悩むタイミングがあり、これはcriticalな問題ではないと思うのでlightモードだけにしよう。

* デザインのとこ大枠は決めてから開発しだしたが、結構迷った
  * 決めたもののやはり満足できていない

  * pintarestとかAI生成とかで見てるともっとこうしようというのが出てくる

  * 最初からuizardとかの生成したものベースなら納得感あるのでそれで進めるのがいい or テンプレートやフリーのものをそのまま使うぐらいなら後で迷わない。自分の手を一部でもいれるとそこだけ違和感を感じてしまう。

* バックアップ容量が増えて途中でタイムアウトしたりバックアップデータのための容量がなくて、エラー、そもそも保存できないケースがありそう
  → 定期的なバックアップを推奨して、ユーザーに状態を知ってもらう必要がある
  * 機種変更で過去の大切な思い出が復元できない、「家族との思い出が消えた」というFBがくるのはつらい
  * 端末のストレージ、iCloudの保存容量をFBで出す感じかな〜

* 日記は他人を気にせずアウトプットをする、自分の原液が流れる場所なのかもしれない

* このアプリはまだ未完成です、あなたが日記を書くことで完成します、というキャッチフレーズいいかも

* SPMでマルチモジュールでやることが多かったが、小さいプロジェクトで趣味開発だったので、利用しなかった。下記などを都度対応するのを省けてとりあえず一人でサクッと作る場合は開発速度上がると思う。

  * Package.swiftでの依存関係の記載

  * importの都度記載

* アニメーションはデザイン当て込みの後まで我慢した方がいいかも。気になっていろいろ試してしまう。それが目的なら良いが。
